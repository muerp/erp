import{z as ie,d as M,r as B,e as m,a as s,c as E,s as o,j as g,w as l,F as N,m as D,b as e,t as X,v as T,p as S,o as W,A as de,B as re,l as q,C as ee,q as u,D as O,G as ce,h as L,y as ue,H as pe,g as me,i as te,I as _e}from"./index-BVpSb869.js";import{_ as fe,a as ye,g as be,m as he,c as le}from"./TableItem.vue_vue_type_style_index_0_lang-BmY4HoOx.js";import{d as ve,t as xe,b as ge,c as ke,B as we,a as U,S as Ee,P as oe,e as ne,L as Ie}from"./useNavStore-Bfm8LjVa.js";import"./moment-CtDNkRxN.js";const Ce=k=>k.map(r=>{const p={...r};if(p.children=[{type:1e3,parent:p}],p.type===6)for(const _ in p.map)p.map[_].state=_;return p}),K={...ve};K.headers=Ce(K.headers);const t=ie({searchs:xe,trees:ge,buttons:ke,tables:K,rows:[{key1:1,key2:"显示文本",key3:!1,key4:Date.now(),key5:{icon:"tab",color:"red"},key6:1,key7:"",key100:""}]}),Ve=(k,r)=>{if(!t.searchs)return;const p=~~r.index+(r.position==="left"?0:1),_=~~k.index;_!==p&&(console.log("updateSearchSort--",_,p),t.searchs.splice(_,1),p>=_?t.searchs.splice(p-1,0,k.item):t.searchs.splice(p,0,k.item))},je=k=>{console.log("-updateSearchProperty--",k)},$e={key:0},ze={key:0},Ue=M({__name:"AddButtons",setup(k){const r=B(),p=B(!1),_=()=>{t.curEditorItem&&t.curEditorItem.data&&(t.curEditorItem.data.active=!1),t.curEditorItem={type:"button"}},f=x=>{x.type>=60?r.value[0].handleOpen():x.type===we.add&&(p.value=!0)},v=x=>{x.disabled=!x.disabled};return(x,I)=>{const $=m("svg-icon"),C=m("el-button"),i=m("el-tooltip"),y=m("el-checkbox"),d=m("el-dropdown-item"),a=m("el-dropdown-menu"),c=m("el-dropdown"),b=m("el-row");return s(),E(N,null,[o(t).buttons?(s(),g(b,{key:0,class:S(["add-buttons",{active:o(t).curEditorItem&&o(t).curEditorItem.type==="button"}]),onClick:_},{default:l(()=>[(s(!0),E(N,null,D(o(t).buttons,(w,V)=>(s(),E("div",{key:V},[w.type<60?(s(),g(i,{key:0,content:o(U)[w.type].tip,disabled:!o(U)[w.type].tip},{default:l(()=>[e(C,{type:o(U)[w.type].type,circle:!o(U)[w.type].label,plain:!!o(U)[w.type].label,onClick:z=>f(w)},{default:l(()=>[e($,{icon:o(U)[w.type].icon},null,8,["icon"]),o(U)[w.type].label?(s(),E("span",$e,X(o(U)[w.type].label),1)):T("",!0)]),_:2},1032,["type","circle","plain","onClick"])]),_:2},1032,["content","disabled"])):(s(),g(c,{key:1,ref_for:!0,ref_key:"dropdown",ref:r,"hide-on-click":!1,trigger:"click",style:{"margin-right":"30px"}},{dropdown:l(()=>[e(a,null,{default:l(()=>[(s(!0),E(N,null,D(o(t).tables.headers,(z,A)=>(s(),g(d,{key:A,onClick:Y=>v(z)},{default:l(()=>[e(y,{checked:!z.disabled,label:z.label},null,8,["checked","label"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:l(()=>[e(C,{type:o(U)[w.type].type,circle:!o(U)[w.type].label,plain:!!o(U)[w.type].label,onClick:z=>f(w)},{default:l(()=>[e($,{icon:o(U)[w.type].icon},null,8,["icon"]),o(U)[w.type].label?(s(),E("span",ze,X(o(U)[w.type].label),1)):T("",!0)]),_:2},1032,["type","circle","plain","onClick"])]),_:2},1536))]))),128))]),_:1},8,["class"])):T("",!0),e(fe,{modelValue:p.value,"onUpdate:modelValue":I[0]||(I[0]=w=>p.value=w)},null,8,["modelValue"])],64)}}}),ae=k=>{const r=B(null);let p=0,_=0,f=!1;const v=()=>{document.body.style.overflow="hidden"},x=()=>{document.body.style.overflow="auto"},I=()=>{f=!0,v()},$=()=>{f=!1,x(),setTimeout(()=>{r.value&&(r.value.style.pointerEvents="auto")},100)},C=d=>{requestAnimationFrame(()=>{if(f&&r.value){const a="touches"in d?d.touches[0].clientX:d.clientX,c="touches"in d?d.touches[0].clientY:d.clientY;d.stopPropagation(),d.preventDefault(),r.value.style.pointerEvents="none",k("drag-move",{offsetX:a,offsetY:c,e:d})}})},i=d=>{f&&k("drag-end",{e:d}),$(),document.removeEventListener("touchmove",C),document.removeEventListener("mousemove",C)},y=d=>{r.value&&(p="touches"in d?d.touches[0].clientX-r.value.offsetLeft:d.clientX-r.value.offsetLeft,_="touches"in d?d.touches[0].clientY-r.value.offsetTop:d.clientY-r.value.offsetTop,I(),document.addEventListener("mousemove",C,{passive:!1}),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("mouseup",i),document.addEventListener("touchend",i),d.stopPropagation(),k("drag-start",{offsetX:p,offsetY:_,e:d}))};return W(()=>{r.value&&(r.value.addEventListener("mousedown",y),r.value.addEventListener("touchstart",y))}),de(()=>{r.value&&(r.value.removeEventListener("mousedown",y),r.value.removeEventListener("touchstart",y)),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",i)}),r},Se=M({__name:"DragFrame",props:{width:{type:[String,Number],default:""},index:{type:[Number,String],default:0},item:{type:Object,require:void 0},activeItem:{type:Object,default:void 0},checkFrame:{type:Boolean,default:!1}},emits:["update:width","update:activeItem","drag-end","change-width"],setup(k,{emit:r}){const p=k,_=re("fromList"),f=r,v=B();de(()=>{delete _.value[p.index]}),q(()=>p.index,(i,y)=>{i!==y&&_.value[y]&&(_.value[i]=_.value[y],delete _.value[y])});const x=ae((i,y)=>{if(i==="drag-start")v.value=void 0;else if(i==="drag-end")v.value=void 0,f("drag-end",{item:p.item,index:p.index}),f("update:activeItem");else{v.value={x:y.offsetX,y:y.offsetY};const d=Object.keys(_.value);for(let a=0;a<d.length;++a){const c=d[a],b=_.value[c],w=b.el.getBoundingClientRect(),V=y.offsetX-w.left,z=y.offsetY-w.top;if(!(z<0||z>w.height))if(V>=0&&V<=w.width*.5){f("update:activeItem",{item:b.item,position:"left",index:c});break}else if(V>=0&&V<=w.width){f("update:activeItem",{item:b.item,position:"right",index:c});break}else f("update:activeItem")}}}),I=i=>{p.checkFrame&&(x.value=i,_.value[p.index]={el:i,index:p.index,item:p.item})};let $=0;const C=ae((i,y)=>{if(i==="drag-start")$=p.item.width;else if(i==="drag-move"){const d=x.value.getBoundingClientRect();if(!x.value.parentNode)return;const a=x.value.parentNode.getBoundingClientRect();let c=y.offsetX-d.left;c=c<100?100:c,f("update:width",~~(c/a.width*100).toFixed(2))}else i==="drag-end"&&$!==p.item.width&&f("change-width")});return(i,y)=>(s(),E("div",{class:S(["drag-frame pos-relative",k.activeItem&&k.activeItem.index===k.index?"frame-to-"+k.activeItem.position:""]),ref:I,style:O({width:k.width?k.width+"%":""})},[ee(i.$slots,"default"),u("div",{class:"df-right-line",ref_key:"dragRight",ref:C},null,512),v.value?(s(),E("div",{key:0,class:"drag-frame-dialog",style:O({left:v.value.x+10+"px",top:v.value.y+5+"px"})},[ee(i.$slots,"default")],4)):T("",!0)],6))}}),Te=M({__name:"AddSearch",setup(k){const r=B([]),p=B({});ce("fromList",p);const _=B();q(()=>t.searchs,()=>{r.value=t.searchs.map(()=>"")});const f=()=>{t.curEditorItem&&t.curEditorItem.data&&(t.curEditorItem.data.active=!1),t.curEditorItem={type:"search-box"}},v=i=>{i===1?t.searchs.unshift({type:1,label:"标签",width:30,key:"params"+t.searchs.length}):i===2?t.searchs.unshift({type:2,label:"选择",placeholder:"请选择",width:30,menus:[{value:2,label:"正常"},{value:1,label:"停用"}],key:"params"+t.searchs.length}):i===3?t.searchs.unshift({type:3,label:"时间",width:30,key:"params"+t.searchs.length}):i===4&&t.searchs.unshift({type:4,label:"日期范围",width:40,key:"params"+t.searchs.length})},x=(i,y)=>{i.stopPropagation(),!(y.type>=99)&&(t.curEditorItem&&t.curEditorItem.data&&(t.curEditorItem.data.active=!1),t.curEditorItem={data:y,type:"search"},t.curEditorItem.data.active=!0)},I=i=>{i&&_.value&&Ve(i,_.value)},$=i=>{je(i)},C=()=>{r.value=[]};return(i,y)=>{const d=m("el-input"),a=m("el-option"),c=m("el-select"),b=m("el-date-picker"),w=m("svg-icon"),V=m("el-button"),z=m("el-form-item"),A=m("el-dropdown-item"),Y=m("el-dropdown"),H=m("el-row"),J=m("el-form");return s(),g(H,{class:S(["add-search",{active:o(t).curEditorItem&&o(t).curEditorItem.type==="search-box"}]),onClick:f},{default:l(()=>[e(J,{model:r.value},{default:l(()=>[e(H,null,{default:l(()=>[(s(!0),E(N,null,D(o(t).searchs,(j,G)=>(s(),g(Se,{key:j.key,item:j,"active-item":_.value,"onUpdate:activeItem":y[0]||(y[0]=F=>_.value=F),index:G.toString(),width:j.width,"onUpdate:width":F=>j.width=F,class:S({active:j.active}),"check-frame":j.type<99,onClick:F=>x(F,j),onDragEnd:I,onChangeWidth:F=>$(j)},{default:l(()=>[e(z,{label:j.label},{default:l(()=>[j.type===1?(s(),g(d,{key:0,readonly:!0,placeholder:"请输入"+j.label},null,8,["placeholder"])):j.type===2?(s(),g(c,{key:1,placeholder:j.placeholder},{default:l(()=>[(s(!0),E(N,null,D(j.menus,F=>(s(),g(a,{key:F.value,label:F.label,value:F.value},null,8,["label","value"]))),128))]),_:2},1032,["placeholder"])):j.type===3?(s(),g(b,{key:2,disabled:!0,type:"date",placeholder:"选择日期",clearable:""})):j.type===4?(s(),g(b,{key:3,disabled:!0,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"})):j.type===99?(s(),g(V,{key:4,class:"search-btn",type:"primary"},{default:l(()=>[e(w,{icon:"search"}),L(" 搜索 ")]),_:1})):j.type===100?(s(),g(V,{key:5,class:"search-btn",type:"primary",onClick:C},{default:l(()=>[e(w,{icon:"reset"}),L(" 重置 ")]),_:1})):T("",!0)]),_:2},1032,["label"])]),_:2},1032,["item","active-item","index","width","onUpdate:width","class","check-frame","onClick","onChangeWidth"]))),128)),o(t).curEditorItem&&o(t).curEditorItem.type==="search-box"?(s(),g(Y,{key:0,class:"adf-c",trigger:"click",placement:"bottom-end"},{dropdown:l(()=>[e(A,{onClick:y[1]||(y[1]=j=>v(1))},{default:l(()=>[L(" 输入 ")]),_:1}),e(A,{onClick:y[2]||(y[2]=j=>v(2))},{default:l(()=>[L(" 选择 ")]),_:1}),e(A,{onClick:y[3]||(y[3]=j=>v(3))},{default:l(()=>[L(" 日期 ")]),_:1}),e(A,{onClick:y[4]||(y[4]=j=>v(4))},{default:l(()=>[L(" 日期范围 ")]),_:1})]),default:l(()=>[e(V,{class:"as-add",type:"info"},{default:l(()=>[e(w,{icon:"add"})]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1},8,["model"])]),_:1},8,["class"])}}}),Le={key:0,class:"table-pagination"},Be=M({__name:"AddTable",setup(k){const r=ue(()=>t.tables.headers.filter($=>!$.disabled)),p=()=>{t.curEditorItem&&t.curEditorItem.data&&(t.curEditorItem.data.active=!1),t.curEditorItem={type:"table"}},_=B(1),f=B(20);q(()=>t.tables,()=>{}),W(()=>{});const v=()=>{},x=()=>{},I=($,C)=>{C.stopPropagation(),t.curEditorItem&&t.curEditorItem.data&&(t.curEditorItem.data.active=!1),t.curEditorItem={type:"table-cell",data:$.property}};return($,C)=>{const i=m("el-table-column"),y=m("el-table"),d=m("el-pagination");return s(),E("div",{class:S(["add-table flex-1 pt-2",{active:o(t).curEditorItem&&o(t).curEditorItem.type==="table"}]),onClick:p},[e(y,{data:o(t).rows,style:{width:"100%"},border:"",onHeaderClick:I},{default:l(()=>[o(t).tables.select?(s(),g(i,{key:0,prop:"_checkbox",type:"selection","label-class-name":o(t).curEditorItem&&o(t).curEditorItem.type==="table-cell"&&o(t).curEditorItem.data.key==="_checkbox"?"cell-active cell-active-first":"",width:"55",align:"center"},null,8,["label-class-name"])):T("",!0),(s(!0),E(N,null,D(r.value,a=>(s(),g(i,{prop:a.key,"label-class-name":o(t).curEditorItem&&o(t).curEditorItem.type==="table-cell"&&o(t).curEditorItem.data.key===a.key?"cell-active":"",label:a.label,key:a.key,align:"center",width:a.width},{default:l(c=>[e(ye,{data:c.row,header:a,config:o(t).tables},null,8,["data","header","config"])]),_:2},1032,["prop","label-class-name","label","width"]))),128))]),_:1},8,["data"]),o(t).rows.length>0?(s(),E("div",Le,[e(d,{"current-page":_.value,"onUpdate:currentPage":C[0]||(C[0]=a=>_.value=a),"page-size":f.value,"onUpdate:pageSize":C[1]||(C[1]=a=>f.value=a),background:!0,layout:"prev, pager, next, jumper",total:100,onSizeChange:v,onCurrentChange:x},null,8,["current-page","page-size"])])):T("",!0)],2)}}}),Pe=M({__name:"AddNav",setup(k){const r={children:"children",label:"label"},p=B([]);W(()=>{t.trees&&(p.value=t.trees.map(f=>f.id))});const _=()=>{};return(f,v)=>{const x=m("el-tree"),I=m("mu-dragable");return s(),g(I,{class:"add-tree","init-width":200,"min-width":120},{default:l(()=>[e(x,{data:o(t).trees,props:r,"node-key":"id","default-expanded-keys":p.value,onNodeClick:_,"empty-text":"数据为空"},null,8,["data","default-expanded-keys"])]),_:1})}}}),Fe={class:"flex-1 d-column"},Me=u("div",{class:"pl-1 pt-1"},"属性",-1),Ne={key:0},De={key:1,class:"property-button"},Ae={key:0},Re={class:"p-text"},Xe={key:2,class:"property-table flex-1 overflow-auto"},Oe={key:1,class:"w-full"},Ye={class:"d-flex align-center color-select"},He={key:2},We={key:3,class:"property-table flex-1 overflow-auto"},qe={class:"d-flex align-center color-select"},Je={key:2},Ge=M({__name:"Property",setup(k){const r=B([{type:1,enabled:!0,text:"新建行"},{type:2,enabled:!0,text:"修改"},{type:3,enabled:!0,text:"多行删除"},{type:4,enabled:!0,text:"导入excel，json，txt文件"},{type:5,enabled:!0,text:"导出excel"},{type:10,enabled:!0,text:"搜索单元格"},{type:11,enabled:!0,text:"刷新当前页"},{type:60,enabled:!0,text:"列隐藏，由列自动生成"}]),p=B({});q(()=>t.curEditorItem,()=>{t.curEditorItem.type==="button"&&t.buttons&&t.buttons.forEach(d=>{d.type<10?r.value[d.type].enabled=!0:d.type===10?r.value[5].enabled=!0:d.type===11?r.value[6].enabled=!0:d.type===60&&(r.value[7].enabled=!0)})});const _=d=>{t.buttons||(t.buttons=[]);const a=t.buttons.findIndex(c=>c.type===d.type);a!==-1?(t.buttons.splice(a,1),t.buttons.length===0&&(t.buttons=void 0)):(t.buttons.push({type:d.type}),t.buttons.sort((c,b)=>c.type>b.type?1:-1))},f=({sourceIndex:d,targetIndex:a,item:c,position:b},w)=>{if(!c.children||c.children.length===0)return;let V=a+(b==="bottom"?1:0);V-=d<=a?1:0,V!==d&&(w.splice(d,1),w.splice(V,0,c))},v=d=>{d.push({label:"",value:""})},x=d=>{const c=~~Math.max(...Object.keys(d).map(b=>~~b))+1;d[c]={label:"状态",color:"#999",state:c}},I=(d,a)=>{delete d[a]},$=(d,a,c)=>{d.state!==""&&(a[d.state]&&d.state!==c?(d.state=c,pe({message:"状态值必须互不相同",type:"error",plain:!0,duration:2e3})):d.state&&d.state!==c&&(a[d.state]=a[c],delete a[c]))},C=(d,a)=>{d.splice(a,1)},i=(d,a,c)=>{a[c]=d},y=d=>{const a=t.curEditorItem.data.buttons.findIndex(c=>c.type===d.type);a!==-1?t.curEditorItem.data.buttons.splice(a,1):(t.curEditorItem.data.buttons.push(d),t.curEditorItem.data.buttons.sort((c,b)=>c.type>b.type?1:-1))};return(d,a)=>{const c=m("el-input"),b=m("el-form-item"),w=m("el-slider"),V=m("svg-icon"),z=m("el-button"),A=m("mu-tree"),Y=m("el-scrollbar"),H=m("mu-dragable"),J=m("el-form"),j=m("el-checkbox"),G=m("el-row"),F=m("code-editor"),Z=m("el-tag"),Q=m("mu-color-picker");return s(),E("div",Fe,[Me,o(t).curEditorItem&&o(t).curEditorItem.type==="search"?(s(),E("div",Ne,[e(J,{model:p.value},{default:l(()=>[e(b,{label:"名称"},{default:l(()=>[e(c,{modelValue:o(t).curEditorItem.data.key,"onUpdate:modelValue":a[0]||(a[0]=n=>o(t).curEditorItem.data.key=n),placeholder:"名称"},null,8,["modelValue"])]),_:1}),e(b,{label:"标签"},{default:l(()=>[e(c,{modelValue:o(t).curEditorItem.data.label,"onUpdate:modelValue":a[1]||(a[1]=n=>o(t).curEditorItem.data.label=n),placeholder:"搜索标签"},null,8,["modelValue"])]),_:1}),e(b,{label:"宽度"},{default:l(()=>[e(w,{min:20,max:100,modelValue:o(t).curEditorItem.data.width,"onUpdate:modelValue":a[2]||(a[2]=n=>o(t).curEditorItem.data.width=n),"show-input":"",size:"small"},null,8,["modelValue"])]),_:1}),o(t).curEditorItem.data.type===o(Ee).select?(s(),g(b,{key:0,class:"select-menus",label:"选择菜单"},{default:l(()=>[e(H,{class:"flex-1 state-list",direction:"bottom",initHeight:200},{default:l(()=>[e(z,{text:"",class:"menu-add pos-absolute",onClick:a[3]||(a[3]=n=>v(o(t).curEditorItem.data.menus))},{default:l(()=>[e(V,{icon:"add"})]),_:1}),e(Y,null,{default:l(()=>[e(A,{list:o(t).curEditorItem.data.menus,"disabled-center":!0,onNodeMove:a[4]||(a[4]=n=>f(n,o(t).curEditorItem.data.menus))},{default:l(({data:n,index:h})=>[e(b,{label:"标签"},{default:l(()=>[e(c,{modelValue:n.label,"onUpdate:modelValue":P=>n.label=P,placeholder:"",class:"state-label"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{label:"状态"},{default:l(()=>[e(c,{modelValue:n.value,"onUpdate:modelValue":P=>n.value=P,placeholder:"",class:"state-value"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(z,{class:"trash-delete",text:"",onClick:P=>C(o(t).curEditorItem.data.menus,h)},{default:l(()=>[e(V,{icon:"trash"})]),_:2},1032,["onClick"])]),"drag-icon":l(()=>[e(V,{class:"drag-icon",icon:"drag"})]),_:1},8,["list"])]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1},8,["model"])])):o(t).curEditorItem&&o(t).curEditorItem.type==="button"?(s(),E("div",De,[(s(!0),E(N,null,D(r.value,n=>(s(),g(j,{modelValue:n.enabled,"onUpdate:modelValue":h=>n.enabled=h,key:n.type+"-s",onChange:h=>_(n)},{default:l(()=>[e(z,{type:o(U)[n.type].type,circle:!o(U)[n.type].label,plain:!!o(U)[n.type].label},{default:l(()=>[e(V,{icon:o(U)[n.type].icon},null,8,["icon"]),o(U)[n.type].label?(s(),E("span",Ae,X(o(U)[n.type].label),1)):T("",!0)]),_:2},1032,["type","circle","plain"]),u("p",Re,X(n.text),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]))),128))])):o(t).curEditorItem&&o(t).curEditorItem.type==="table"?(s(),E("div",Xe,[e(G,{class:"mt-1 mb-1 ml-2"},{default:l(()=>[e(j,null,{default:l(()=>[L("多选框")]),_:1})]),_:1}),e(A,{list:o(t).tables.headers,"disabled-center":!0,onNodeMove:a[5]||(a[5]=n=>f(n,o(t).tables.headers))},{"drag-icon":l(({data:n})=>[n.type!==1e3?(s(),g(V,{key:0,class:"drag-icon",icon:"drag"})):T("",!0)]),default:l(({data:n})=>[e(V,{class:S(["tree-arrow",{hidden:!n.children||n.children.length===0}]),icon:"arrow-right"},null,8,["class"]),n.type!==1e3?(s(),g(c,{key:0,class:"table-label",modelValue:n.label,"onUpdate:modelValue":h=>n.label=h},null,8,["modelValue","onUpdate:modelValue"])):n.parent?(s(),E("div",Oe,[e(b,{label:"关键词"},{default:l(()=>[e(c,{modelValue:n.parent.key,"onUpdate:modelValue":h=>n.parent.key=h},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(b,{label:"宽度"},{default:l(()=>[e(c,{modelValue:n.parent.width,"onUpdate:modelValue":h=>n.parent.width=h,placeholder:"自动设置"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.parent.type===1?(s(),g(b,{key:0,class:"w-full d-flex align-top table-menus",label:"下拉选择"},{default:l(()=>[e(F,{value:JSON.stringify(n.parent.menus),lang:"json",onChange:h=>i(h,n.parent,"menus")},null,8,["value","onChange"])]),_:2},1024)):n.parent.type===6?(s(),g(b,{key:1,class:"table-state w-full d-flex align-top",label:"状态设置"},{default:l(()=>[e(z,{text:"",class:"menu-add pos-absolute",onClick:h=>x(n.parent.map)},{default:l(()=>[e(V,{icon:"add"})]),_:2},1032,["onClick"]),(s(!0),E(N,null,D(n.parent.map,(h,P)=>(s(),E("div",{class:"d-flex align-center",key:P+"-"+h.state},[e(c,{modelValue:h.state,"onUpdate:modelValue":R=>h.state=R,style:{width:"40px"},"input-style":"text-align:center;",onBlur:R=>$(h,n.parent.map,P)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),e(c,{class:"select-state-color",modelValue:h.label,"onUpdate:modelValue":R=>h.label=R,style:O({flex:2,color:h.color,"background-color":h.color+"30"})},null,8,["modelValue","onUpdate:modelValue","style"]),e(Q,{"validate-event":!0,predefine:o(oe),"model-value":h.color,onActiveChange:R=>i(R,h,"color")},{default:l(()=>[u("div",Ye,[e(Z,{color:h.color,size:"small"},null,8,["color"]),e(V,{class:"min-arrow",icon:"arrow-right"})])]),_:2},1032,["predefine","model-value","onActiveChange"]),e(z,{link:"",onClick:R=>I(n.parent.map,h.state)},{default:l(()=>[e(V,{icon:"trash"})]),_:2},1032,["onClick"])]))),128))]),_:2},1024)):n.parent.type===100?(s(),E("div",He,[e(b,{label:"按钮样式"},{default:l(()=>[e(z,{link:"",class:S(["button-type",{active:n.parent.buttonType==="text"}]),onClick:h=>i("text",n.parent,"buttonType")},{default:l(()=>[L(" link ")]),_:2},1032,["class","onClick"]),e(z,{link:"",class:S(["button-type",{active:n.parent.buttonType==="round"}]),onClick:h=>i("round",n.parent,"buttonType")},{default:l(()=>[L(" circle ")]),_:2},1032,["class","onClick"]),e(z,{link:"",class:S(["button-type",{active:n.parent.buttonType==="plain"}]),onClick:h=>i("plain",n.parent,"buttonType")},{default:l(()=>[L(" round ")]),_:2},1032,["class","onClick"])]),_:2},1024),e(b,{class:"btn-property"},{default:l(()=>[(s(!0),E(N,null,D(o(ne),h=>(s(),g(j,{key:h.type+"-b",checked:n.parent.buttons.findIndex(P=>P.type===h.type)!==-1,onChange:P=>y(h)},{default:l(()=>[e(z,{class:S({"opa-text":n.parent.buttonType==="text"}),type:o(U)[h.type].type,text:n.parent.buttonType==="text",round:n.parent.buttonType==="round",plain:n.parent.buttonType==="plain"},{default:l(()=>[L(X(o(U)[h.type].label),1)]),_:2},1032,["class","type","text","round","plain"])]),_:2},1032,["checked","onChange"]))),128))]),_:2},1024)])):T("",!0)])):T("",!0)]),_:1},8,["list"])])):o(t).curEditorItem&&o(t).curEditorItem.type==="table-cell"&&o(t).curEditorItem.data.key!=="_checkbox"?(s(),E("div",We,[e(b,{label:"名称"},{default:l(()=>[e(c,{modelValue:o(t).curEditorItem.data.label,"onUpdate:modelValue":a[6]||(a[6]=n=>o(t).curEditorItem.data.label=n)},null,8,["modelValue"])]),_:1}),e(b,{label:"关键词"},{default:l(()=>[e(c,{modelValue:o(t).curEditorItem.data.key,"onUpdate:modelValue":a[7]||(a[7]=n=>o(t).curEditorItem.data.key=n)},null,8,["modelValue"])]),_:1}),e(b,{label:"宽度"},{default:l(()=>[e(c,{modelValue:o(t).curEditorItem.data.width,"onUpdate:modelValue":a[8]||(a[8]=n=>o(t).curEditorItem.data.width=n),placeholder:"自动设置"},null,8,["modelValue"])]),_:1}),o(t).curEditorItem.data.type===1?(s(),g(b,{key:0,class:"w-full d-flex align-top table-menus",label:"下拉选择"},{default:l(()=>[e(F,{value:JSON.stringify(o(t).curEditorItem.data.menus),lang:"json",onChange:a[9]||(a[9]=n=>i(n,o(t).curEditorItem.data,"menus"))},null,8,["value"])]),_:1})):o(t).curEditorItem.data.type===6?(s(),g(b,{key:1,class:"table-state w-full d-flex align-top",label:"状态设置"},{default:l(()=>[e(z,{text:"",class:"menu-add pos-absolute",onClick:a[10]||(a[10]=n=>x(o(t).curEditorItem.data.map))},{default:l(()=>[e(V,{icon:"add"})]),_:1}),(s(!0),E(N,null,D(o(t).curEditorItem.data.map,(n,h)=>(s(),E("div",{class:"d-flex align-center",key:h+"-"+n.state},[e(c,{modelValue:n.state,"onUpdate:modelValue":P=>n.state=P,style:{width:"40px"},"input-style":"text-align:center;",onBlur:P=>$(n,o(t).curEditorItem.data.map,h)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),e(c,{class:"select-state-color",modelValue:n.label,"onUpdate:modelValue":P=>n.label=P,style:O({flex:2,color:n.color,"background-color":n.color+"30"})},null,8,["modelValue","onUpdate:modelValue","style"]),e(Q,{"validate-event":!0,predefine:o(oe),"model-value":n.color,onActiveChange:P=>i(P,n,"color")},{default:l(()=>[u("div",qe,[e(Z,{color:n.color,size:"small"},null,8,["color"]),e(V,{class:"min-arrow",icon:"arrow-right"})])]),_:2},1032,["predefine","model-value","onActiveChange"]),e(z,{link:"",onClick:P=>I(o(t).curEditorItem.data.map,n.state)},{default:l(()=>[e(V,{icon:"trash"})]),_:2},1032,["onClick"])]))),128))]),_:1})):o(t).curEditorItem.data.type===100?(s(),E("div",Je,[e(b,{label:"按钮样式"},{default:l(()=>[e(z,{link:"",class:S(["button-type",{active:o(t).curEditorItem.data.buttonType==="text"}]),onClick:a[11]||(a[11]=n=>i("text",o(t).curEditorItem.data,"buttonType"))},{default:l(()=>[L(" link ")]),_:1},8,["class"]),e(z,{link:"",class:S(["button-type",{active:o(t).curEditorItem.data.buttonType==="round"}]),onClick:a[12]||(a[12]=n=>i("round",o(t).curEditorItem.data,"buttonType"))},{default:l(()=>[L(" circle ")]),_:1},8,["class"]),e(z,{link:"",class:S(["button-type",{active:o(t).curEditorItem.data.buttonType==="plain"}]),onClick:a[13]||(a[13]=n=>i("plain",o(t).curEditorItem.data,"buttonType"))},{default:l(()=>[L(" round ")]),_:1},8,["class"])]),_:1}),e(b,{class:"btn-property"},{default:l(()=>[(s(!0),E(N,null,D(o(ne),n=>(s(),g(j,{key:n.type+"-b",checked:o(t).curEditorItem.data.buttons.findIndex(h=>h.type===n.type)!==-1,onChange:h=>y(n)},{default:l(()=>[e(z,{class:S({"opa-text":o(t).curEditorItem.data.buttonType==="text"}),type:o(U)[n.type].type,text:o(t).curEditorItem.data.buttonType==="text",round:o(t).curEditorItem.data.buttonType==="round",plain:o(t).curEditorItem.data.buttonType==="plain"},{default:l(()=>[L(X(o(U)[n.type].label),1)]),_:2},1032,["class","type","text","round","plain"])]),_:2},1032,["checked","onChange"]))),128))]),_:1})])):T("",!0)])):T("",!0)])}}}),Ke={class:"flex-1 mu-element"},Ze=u("div",{class:"pl-1 pt-1"},"模块",-1),Qe={class:"pl-1 pt-1"},et=u("span",{class:"zj-box1"},null,-1),tt=u("span",{class:"zj-box1",style:{"margin-left":"12px"}},null,-1),lt=u("span",{class:"zj-box1",style:{"margin-left":"12px"}},null,-1),ot=u("span",{class:"zj-box1"},null,-1),nt=u("span",{class:"zj-box1",style:{"margin-left":"12px"}},null,-1),at=u("span",{class:"zj-box1",style:{"margin-left":"12px"}},null,-1),st=u("div",{class:"flex-1 zj-exp"},"左侧为树结构，用于过滤，默认显示",-1),dt=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),rt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),ct=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),it=u("span",{class:"zj-box1",style:{width:"38px"}},null,-1),ut=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"60px"}},null,-1),pt=u("span",{class:"zj-box1",style:{width:"60px"}},null,-1),mt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"38px"}},null,-1),_t=u("span",{class:"zj-box1",style:{width:"20px"}},null,-1),ft=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"20px"}},null,-1),yt=u("div",{class:"flex-1 zj-exp"}," 搜索模块，可以自定义搜索类型，搜索参数，拖动可以交换位置，选中后可以设置属性参数。 ",-1),bt=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),ht=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),vt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),xt=u("span",{class:"zj-box1",style:{width:"38px"}},null,-1),gt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"60px"}},null,-1),kt=u("span",{class:"zj-box1",style:{width:"60px"}},null,-1),wt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"38px"}},null,-1),Et=u("span",{class:"zj-box1",style:{width:"20px"}},null,-1),It=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"20px"}},null,-1),Ct=u("div",{class:"flex-1 zj-exp"}," 用于新增、删除、导入、导出、搜索、刷新、列隐藏等功能、可自行选择添加功能 ",-1),Vt={class:"zj-item d-flex overflow-hidden mt-2 active"},jt=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),$t=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),zt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),Ut=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),St=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),Tt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),Lt=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),Bt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),Pt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),Ft=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),Mt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),Nt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),Dt=u("span",{class:"zj-box1",style:{width:"30px"}},null,-1),At=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"30px"}},null,-1),Rt=u("span",{class:"zj-box1",style:{"margin-left":"6px",width:"32px"}},null,-1),Xt=u("div",{class:"flex-1 zj-exp"}," 表格数据，可自定义表格显示列类型、列操作按钮，自动生成json格式文档，接口根据该数据返回即可 ",-1),Ot=M({__name:"Zujian",setup(k){const r=re("elementInfo"),p=_=>{r.value[_]=!r.value[_]};return(_,f)=>{const v=m("el-card"),x=m("svg-icon"),I=m("el-row");return s(),E("div",Ke,[Ze,u("div",Qe,[u("div",{class:S(["zj-item d-flex overflow-hidden mt-2",{active:o(r).tree}])},[e(v,{class:"zj-box",shadow:"always",onClick:f[0]||(f[0]=$=>p("tree"))},{header:l(()=>[L("左侧树")]),default:l(()=>[et,tt,lt,ot,nt,at]),_:1}),st],2),u("div",{class:S(["zj-item d-flex overflow-hidden mt-2",{active:o(r).search}])},[e(v,{class:"zj-box",shadow:"always",onClick:f[1]||(f[1]=$=>p("search"))},{header:l(()=>[L("搜索模块")]),default:l(()=>[e(I,{class:"w-full"},{default:l(()=>[dt,rt,ct,it,ut,pt,mt,_t,ft,e(x,{icon:"search"})]),_:1})]),_:1}),yt],2),u("div",{class:S(["zj-item d-flex overflow-hidden mt-2",{active:o(r).button}])},[e(v,{class:"zj-box",shadow:"always",onClick:f[2]||(f[2]=$=>p("button"))},{header:l(()=>[L("按钮组合")]),default:l(()=>[e(I,{class:"w-full"},{default:l(()=>[bt,ht,vt,xt,gt,kt,wt,Et,It]),_:1})]),_:1}),Ct],2),u("div",Vt,[e(v,{class:"zj-box",shadow:"always"},{header:l(()=>[L("表格")]),default:l(()=>[e(I,{class:"w-full"},{default:l(()=>[jt,$t,zt,Ut,St,Tt,Lt,Bt,Pt,Ft,Mt,Nt,Dt,At,Rt]),_:1})]),_:1}),Xt])])])}}}),Yt={class:"property-nav"},Ht=M({__name:"PropertyDashboard",setup(k){const r=B(1),p=_=>{r.value=_};return(_,f)=>{const v=m("svg-icon"),x=m("el-button"),I=m("el-tooltip"),$=m("mu-dragable");return s(),g($,{class:"property-dashboard d-flex",direction:"left","init-width":400,"min-width":400},{default:l(()=>[u("div",Yt,[e(I,{content:"组件",placement:"right"},{default:l(()=>[e(x,{text:"",class:S({active:r.value===0}),onClick:f[0]||(f[0]=C=>p(0))},{default:l(()=>[e(v,{icon:"buju"})]),_:1},8,["class"])]),_:1}),e(I,{content:"属性",placement:"right"},{default:l(()=>[e(x,{text:"",class:S({active:r.value===1}),onClick:f[1]||(f[1]=C=>p(1))},{default:l(()=>[e(v,{icon:"props"})]),_:1},8,["class"])]),_:1}),e(I,{content:"数据",placement:"right"},{default:l(()=>[e(x,{text:"",class:S({active:r.value===2}),onClick:f[2]||(f[2]=C=>p(2))},{default:l(()=>[e(v,{icon:"json"})]),_:1},8,["class"])]),_:1}),e(I,{content:"代码",placement:"right"},{default:l(()=>[e(x,{text:"",class:S({active:r.value===3}),onClick:f[3]||(f[3]=C=>p(3))},{default:l(()=>[e(v,{icon:"net"})]),_:1},8,["class"])]),_:1})]),r.value===0?(s(),g(Ot,{key:0})):T("",!0),r.value===1?(s(),g(Ge,{key:1})):T("",!0)]),_:1})}}}),se=M({__name:"SidebarIcon",props:{modelValue:{type:Boolean,default:!1},direction:{type:String,default:"left"}},emits:["update:modelValue"],setup(k,{emit:r}){const p=k,_=r,f=()=>{_("update:modelValue",!p.modelValue)};return(v,x)=>(s(),E("div",{class:S(["sidebar-icon",["sidebar-"+k.direction,{active:k.modelValue}]]),onClick:f},null,2))}}),Wt={class:"flex-1 editor-inner d-column overflow-hidden"},qt={class:"flex-1 overflow-hidden d-column pt-1 pl-1 pr-1"},Jt=M({__name:"EditorContent",props:{isFullscreen:{type:Boolean,default:!1}},emits:["change-sidebar","update:isFullscreen"],setup(k,{emit:r}){const p=k,_=r,f=()=>{_("update:isFullscreen",!p.isFullscreen)},v=B({tree:!1,search:!0,button:!0,table:!0});ce("elementInfo",v);const x=B(!0),I=B(!0),$=()=>{_("change-sidebar",x.value)};return(C,i)=>{const y=m("el-row"),d=m("svg-icon"),a=m("el-button");return s(),E("div",Wt,[e(y,{class:"editor-header align-center",justify:"space-between"},{default:l(()=>[e(y,{class:"align-center"},{default:l(()=>[e(se,{modelValue:x.value,"onUpdate:modelValue":[i[0]||(i[0]=c=>x.value=c),$],class:"mr-2 ml-1"},null,8,["modelValue"])]),_:1}),e(y,{align:"middle"},{default:l(()=>[e(a,{link:"",onClick:f},{default:l(()=>[e(d,{icon:k.isFullscreen?"no-full":"full"},null,8,["icon"])]),_:1}),e(se,{modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=c=>I.value=c),direction:"right",class:"mr-2 ml-1"},null,8,["modelValue"])]),_:1})]),_:1}),e(y,{class:"no-wrap h-full flex-1 overflow-hidden"},{default:l(()=>[e(y,{class:"no-wrap w-full h-full flex-1 overflow-hidden pos-relative"},{default:l(()=>[e(y,{class:"table-scroll overflow-auto w-full h-full"},{default:l(()=>[e(y,{class:"w-full"},{default:l(()=>[v.value.tree?(s(),g(Pe,{key:0})):T("",!0),u("div",qt,[v.value.search?(s(),g(Te,{key:0})):T("",!0),v.value.button?(s(),g(Ue,{key:1})):T("",!0),v.value.table?(s(),g(Be,{key:2})):T("",!0)])]),_:1})]),_:1})]),_:1}),e(Ht,{style:O({display:I.value?"flex":"none"})},null,8,["style"])]),_:1})])}}}),Gt={key:1,class:"d-center tree-dot"},Kt=M({__name:"Editor",setup(k){const r=B(),p=B(!0),_=B(!1);W(()=>{be()});const f=x=>{he(x)},v=x=>{p.value=x};return(x,I)=>{const $=m("el-text"),C=m("el-row"),i=m("svg-icon"),y=m("mu-tree"),d=m("el-scrollbar"),a=m("mu-dragable"),c=me("loading");return s(),E("div",{class:S(["page w-full h-full",{"full-screen":_.value}])},[e(C,{type:"flex",class:"w-full no-wrap overflow-hidden",style:{height:"100%"}},{default:l(()=>[te(e(a,{"init-width":200,style:{"border-right":"1px solid #999"},"min-width":160},{default:l(()=>[e(C,{align:"middle",draggable:"true",justify:"center",class:"mt-1 mb-1"},{default:l(()=>[e($,{size:"small",align:"center"},{default:l(()=>[L("我的菜单")]),_:1})]),_:1}),e(d,null,{default:l(()=>[te((s(),g(y,{"class-name":"erp-loading small-tree",list:o(le).menus,"element-loading-text":"加载中...","element-loading-background":"rgba(0, 0, 0, 0.3)",modelValue:r.value,"onUpdate:modelValue":I[0]||(I[0]=b=>r.value=b),onNodeMove:f},{default:l(({data:b})=>[b.children&&b.children.length>0?(s(),g(i,{key:0,class:"tree-arrow",icon:"arrow-right"})):(s(),E("div",Gt)),b.icon?(s(),g(i,{key:2,class:"nav-icon",icon:b.icon},null,8,["icon"])):T("",!0),u("span",{class:S({"tree-empty":!b.title})},X(b.title||"菜单名称"),3)]),"drag-icon":l(()=>[e(i,{class:"drag-icon",icon:"drag"})]),_:1},8,["list","modelValue"])),[[c,o(le).loadingState===o(Ie).loading]])]),_:1})]),_:1},512),[[_e,p.value]]),e(Jt,{"is-fullscreen":_.value,"onUpdate:isFullscreen":I[1]||(I[1]=b=>_.value=b),onChangeSidebar:v},null,8,["is-fullscreen"])]),_:1})],2)}}}),ll=M({__name:"EditorPage",setup(k){return(r,p)=>(s(),g(Kt))}});export{ll as default};
