import{S as N,B as i,a as I,L as K,t as O,b as A,c as G,d as H}from"./useNavStore-6jucZmWZ.js";import{t as n,f as S,_ as J,a as k,b as Q}from"./TableItem.vue_vue_type_style_index_0_lang-COyYCaD-.js";import{d as U,r as T,l as M,b as a,o as t,i as r,w as c,a as p,c as f,m as $,s as e,F as x,g as E,v,t as L,y as W,k as P,f as R,h as j,q as X}from"./index-0Ja5OWFH.js";const Y=U({__name:"FormSearch",setup(B){const s=T([]);M(()=>n.searchs,()=>{n.searchs&&(s.value=n.searchs.map(()=>""))});const b=()=>{const m={};s.value.forEach((o,y)=>{if(o&&n.searchs){const _=n.searchs[y];_.type===N.date?m[_.key]=new Date(o).getTime():_.type===N.dateRange?m[_.key]=[new Date(o[0]).getTime(),new Date(o[1]).getTime()]:m[_.key]=o}}),S()},h=()=>{s.value=[]};return(m,o)=>{const y=a("el-input"),_=a("el-option"),w=a("el-select"),V=a("el-date-picker"),u=a("svg-icon"),C=a("el-button"),D=a("el-form-item"),z=a("el-row"),F=a("el-form");return t(),r(z,{class:"form-search"},{default:c(()=>[p(F,{model:s.value},{default:c(()=>[p(z,null,{default:c(()=>[(t(!0),f(x,null,$(e(n).searchs,(l,g)=>(t(),r(D,{key:g,label:l.label},{default:c(()=>[l.type===1?(t(),r(y,{key:0,modelValue:s.value[g],"onUpdate:modelValue":d=>s.value[g]=d,placeholder:l.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"])):l.type===2?(t(),r(w,{key:1,modelValue:s.value[g],"onUpdate:modelValue":d=>s.value[g]=d,placeholder:l.placeholder},{default:c(()=>[(t(!0),f(x,null,$(l.menus,d=>(t(),r(_,{key:d.value,label:d.label,value:d.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):l.type===3?(t(),r(V,{key:2,modelValue:s.value[g],"onUpdate:modelValue":d=>s.value[g]=d,type:"date",placeholder:"选择日期",clearable:""},null,8,["modelValue","onUpdate:modelValue"])):l.type===4?(t(),r(V,{key:3,modelValue:s.value[g],"onUpdate:modelValue":d=>s.value[g]=d,type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue","onUpdate:modelValue"])):l.type===99?(t(),r(C,{key:4,class:"search-btn",type:"primary",onClick:b},{default:c(()=>[p(u,{icon:"search"}),E(" 搜索 ")]),_:1})):l.type===100?(t(),r(C,{key:5,class:"search-btn",type:"primary",onClick:h},{default:c(()=>[p(u,{icon:"reset"}),E(" 重置 ")]),_:1})):v("",!0)]),_:2},1032,["label"]))),128))]),_:1})]),_:1},8,["model"])]),_:1})}}}),Z={key:0},ee={key:0},te=U({__name:"FormButtons",setup(B){const s=T(),b=T(!1),h=o=>{o.type>=60?s.value[0].handleOpen():o.type===I.add&&(b.value=!0)},m=o=>{o.disabled=!o.disabled};return(o,y)=>{const _=a("svg-icon"),w=a("el-button"),V=a("el-tooltip"),u=a("el-checkbox"),C=a("el-dropdown-item"),D=a("el-dropdown-menu"),z=a("el-dropdown"),F=a("el-row");return t(),f(x,null,[p(F,{class:"form-buttons"},{default:c(()=>[(t(!0),f(x,null,$(e(n).buttons,(l,g)=>(t(),f("div",{key:g},[l.type<60?(t(),r(V,{key:0,content:e(i)[l.type].tip,disabled:!e(i)[l.type].tip},{default:c(()=>[p(w,{type:e(i)[l.type].type,circle:!e(i)[l.type].label,plain:!!e(i)[l.type].label,onClick:d=>h(l)},{default:c(()=>[p(_,{icon:e(i)[l.type].icon},null,8,["icon"]),e(i)[l.type].label?(t(),f("span",Z,L(e(i)[l.type].label),1)):v("",!0)]),_:2},1032,["type","circle","plain","onClick"])]),_:2},1032,["content","disabled"])):(t(),r(z,{key:1,ref_for:!0,ref_key:"dropdown",ref:s,"hide-on-click":!1,trigger:"click",style:{"margin-right":"30px"}},{dropdown:c(()=>[p(D,null,{default:c(()=>[(t(!0),f(x,null,$(e(n).tables.headers,(d,q)=>(t(),r(C,{key:q,onClick:ce=>m(d)},{default:c(()=>[p(u,{checked:!d.disabled,label:d.label},null,8,["checked","label"])]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:c(()=>[p(w,{type:e(i)[l.type].type,circle:!e(i)[l.type].label,plain:!!e(i)[l.type].label,onClick:d=>h(l)},{default:c(()=>[p(_,{icon:e(i)[l.type].icon},null,8,["icon"]),e(i)[l.type].label?(t(),f("span",ee,L(e(i)[l.type].label),1)):v("",!0)]),_:2},1032,["type","circle","plain","onClick"])]),_:2},1536))]))),128))]),_:1}),p(J,{modelValue:b.value,"onUpdate:modelValue":y[0]||(y[0]=l=>b.value=l)},null,8,["modelValue"])],64)}}}),le={class:"form-table flex-1"},ae={key:0,class:"table-pagination"},oe=U({__name:"FormTable",setup(B){const s=W(()=>n.tables.headers.filter(m=>!m.disabled));M(()=>n.tables,()=>{S()}),P(()=>{S()});const b=()=>{S()},h=()=>{S()};return(m,o)=>{const y=a("el-table-column"),_=a("el-table"),w=a("el-pagination"),V=R("loading");return t(),f("div",le,[j((t(),r(_,{data:e(k).datas,style:{width:"100%"},border:"","empty-text":"暂无数据","element-loading-text":"数据加载中...","element-loading-background":"rgba(0, 0, 0, 0.3)"},{default:c(()=>[e(n).tables.select?(t(),r(y,{key:0,type:"selection",width:"55",align:"center"})):v("",!0),(t(!0),f(x,null,$(s.value,u=>(t(),r(y,{prop:u.key,label:u.label,key:u.key,align:"center",width:u.width},{default:c(C=>[p(Q,{data:C.row,header:u,config:e(n).tables},null,8,["data","header","config"])]),_:2},1032,["prop","label","width"]))),128))]),_:1},8,["data"])),[[V,e(k).loadingState===e(K).loading]]),e(k).datas&&e(k).datas.length>0?(t(),f("div",ae,[p(w,{"current-page":e(k).curPage,"onUpdate:currentPage":o[0]||(o[0]=u=>e(k).curPage=u),"page-size":e(k).pageSize,"onUpdate:pageSize":o[1]||(o[1]=u=>e(k).pageSize=u),background:!0,layout:"prev, pager, next, jumper",total:e(k).totalPage,onSizeChange:b,onCurrentChange:h},null,8,["current-page","page-size","total"])])):v("",!0)])}}}),ne=U({__name:"FormTree",setup(B){const s={children:"children",label:"label"},b=T(""),h=T([]);P(()=>{n.trees&&(h.value=n.trees.map(o=>o.id))});const m=()=>{S()};return(o,y)=>{const _=a("el-input"),w=a("el-tree"),V=a("mu-dragable");return t(),r(V,{class:"form-tree","init-width":200},{default:c(()=>[p(_,{modelValue:b.value,"onUpdate:modelValue":y[0]||(y[0]=u=>b.value=u),size:"large",placeholder:"Please Input","prefix-icon":"Search"},null,8,["modelValue"]),p(w,{data:e(n).trees,props:s,"node-key":"id","default-expanded-keys":h.value,onNodeClick:m,"empty-text":"数据为空"},null,8,["data","default-expanded-keys"])]),_:1})}}}),se={class:"page w-full h-full","element-loading-text":"加载中...","element-loading-background":"rgba(0, 0, 0, 0.3)"},re={class:"flex-1 overflow-hidden d-column"},_e=U({__name:"FormPage",setup(B){const s=T(!0);return P(()=>{setTimeout(()=>{n.searchs=O,n.trees=A,n.buttons=G,n.tables=H,s.value=!1},500)}),(b,h)=>{const m=a("el-row"),o=R("loading");return j((t(),f("div",se,[p(m,{type:"flex",class:"no-wrap min-h-full"},{default:c(()=>[e(n).trees?(t(),r(ne,{key:0})):v("",!0),X("div",re,[e(n).searchs?(t(),r(Y,{key:0})):v("",!0),e(n).buttons?(t(),r(te,{key:1})):v("",!0),e(n).tables?(t(),r(oe,{key:2})):v("",!0)])]),_:1})])),[[o,s.value]])}}});export{_e as default};
