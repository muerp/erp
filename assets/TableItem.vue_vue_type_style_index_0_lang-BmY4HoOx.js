import{z as L,d as E,y as le,e as u,a as l,c as h,j as r,J as ne,K as oe,L as we,r as T,l as Ce,g as Te,w as i,i as Y,m as V,s,F as S,b,h as _,v as j,p as A,q as je,I as Ue,t as B,D as De}from"./index-BVpSb869.js";import{L as p,g as M,H as g,h as Ie,a as te}from"./useNavStore-Bfm8LjVa.js";import{h as $e}from"./moment-CtDNkRxN.js";const q=L({isLoading:!0,trees:void 0,searchs:void 0,buttons:void 0,tables:void 0}),I=L({loadingState:p.success,datas:[],curPage:1,pageSize:20,totalPage:1e3}),Fe=()=>{I.loadingState!==p.loading&&(I.loadingState=p.loading,setTimeout(()=>{I.datas=[{key1:1,key2:"显示文本",key3:!1,key4:Date.now(),key5:{icon:"tab",color:"red"},key6:1,key7:"",key100:""}],I.loadingState=p.success},500))},Be=["src"],se=E({__name:"TableIcon",props:{src:{type:String,default:""},color:{type:String,default:""}},setup(e){const c=e,m=le(()=>ne(c.src)||oe(c.src)?1:2);return(k,f)=>{const y=u("svg-icon");return m.value===1?(l(),h("img",{key:0,class:"t-img",src:e.src,alt:""},null,8,Be)):(l(),r(y,{key:1,icon:e.src,color:e.color},null,8,["icon","color"]))}}}),U=L({loadingState:p.error,images:[]}),Me=()=>{U.loadingState!==p.loading&&(U.loadingState=p.loading,setTimeout(()=>{U.images=["https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/c7f5291ecab14e55a9382444247cc2ce.png","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/62496678a1d942ab892b26d9ad5946b2.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/c7f5291ecab14e55a9382444247cc2ce.png","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/62496678a1d942ab892b26d9ad5946b2.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/c7f5291ecab14e55a9382444247cc2ce.png","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/62496678a1d942ab892b26d9ad5946b2.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/c7f5291ecab14e55a9382444247cc2ce.png","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/62496678a1d942ab892b26d9ad5946b2.jpg","https://moxingshu.oss-cn-shanghai.aliyuncs.com/image/745890cf191e45c599e80624b9563001.jpg"],U.loadingState=p.success},500))},x=L({loadingState:p.normal,menus:[]}),ce=(e,c)=>{e.forEach((m,k)=>{m.index=(c?c.index+"-":"")+k.toString(),m.id=we(),c&&(m.parent=c),m.children&&ce(m.children,m)})},Je=()=>{if(!(x.loadingState===p.success||x.loadingState===p.loading))return x.loadingState=p.loading,new Promise(e=>{setTimeout(()=>{ce(M),M[0].active=!0,M[0].expand=!0,x.menus=M,x.loadingState=p.success,e([])},500)})},Ke=({item:e,parent:c,position:m})=>{var k;if(e.parent&&e.parent.children){const f=e.parent.children.findIndex(y=>y.id===e.id);f!==-1&&e.parent.children.splice(f,1)}else{const f=x.menus.findIndex(y=>y.id===e.id);f!==-1&&x.menus.splice(f,1)}if(m==="center")c.expand=!0,e.parent=c,c.children||(c.children=[]),(k=c.children)==null||k.push(e);else if(c.parent){const f=c.parent.children.findIndex(y=>y.id===c.id)+(m==="top"?0:1);e.parent=c.parent,c.parent.children.splice(f,0,e)}else{const f=x.menus.findIndex(y=>y.id===c.id)+(m==="top"?0:1);e.parent=c.parent,x.menus.splice(f,0,e)}},qe={key:3},Le={key:4,class:"d-flex align-center"},ze=["onClick"],He=["src"],Ge=E({__name:"TableCreateRow",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:c}){const m=e,k=c,f=()=>{k("update:modelValue",!1)},y=T("system"),z=T(["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgba(255, 69, 0, 0.68)","rgb(255, 120, 0)","hsv(51, 100, 98)","hsva(120, 40, 94, 0.5)","hsl(181, 100%, 37%)","hsla(209, 100%, 56%, 0.73)","#c7158577"]),D=T(),a=T({}),H=T(!1),$=T(!1);Ce(()=>m.modelValue,(d,o)=>{d!==o&&($.value=d)});const ie=le(()=>{for(let d=0;d<q.tables.headers.length;++d){const o=q.tables.headers[d];if(o.require&&o.type!==g.switch&&!a.value[o.key])return!1}return!0}),O=()=>{$.value=!1},ue=d=>{a.value[d]=new Date},de=(d,o)=>{var v;a.value[o]||(a.value[o]={}),a.value[o].icon=d,(v=D.value[0])==null||v.handleClose()},re=(d,o)=>{var v;a.value[o]||(a.value[o]={}),a.value[o].icon=d,(v=D.value[0])==null||v.handleClose()},me=(d,o)=>{a.value[o]||(a.value[o]={}),a.value[o].color=d},ge=d=>{d==="my"&&Me()},ye=()=>{const d={};q.tables.headers.forEach(o=>{if(a.value[o.key]){const v=a.value[o.key];d[o.key]=o.type===g.time?new Date(v).getTime():v}}),H.value=!0,setTimeout(()=>{I.datas.unshift(d),H.value=!1,setTimeout(()=>{a.value={},O()},50)},500)},he=()=>{};return(d,o)=>{const v=u("el-option"),P=u("el-select"),fe=u("el-input"),pe=u("el-switch"),be=u("el-date-picker"),w=u("el-button"),ve=u("svg-icon"),R=u("el-row"),F=u("el-tab-pane"),ke=u("el-tabs"),xe=u("el-dropdown"),Ve=u("el-color-picker"),J=u("el-form-item"),Se=u("el-form"),_e=u("el-dialog"),K=Te("loading");return e.modelValue?(l(),r(_e,{key:0,class:"new-table-data",title:"新建数据",modelValue:$.value,"onUpdate:modelValue":o[1]||(o[1]=t=>$.value=t),width:520,onClosed:f},{default:i(()=>[Y((l(),r(Se,{model:a.value,"element-loading-text":"正在提交数据...","element-loading-background":"rgba(0, 0, 0, 0)"},{default:i(()=>[(l(!0),h(S,null,V(s(q).tables.headers,t=>Y((l(),r(J,{key:t.key,label:t.label},{default:i(()=>{var G,Q,W,X,Z,ee,ae;return[t.type===s(g).select?(l(),r(P,{key:0,modelValue:a.value[t.key],"onUpdate:modelValue":n=>a.value[t.key]=n,placeholder:"请选择"+t.label},{default:i(()=>[(l(!0),h(S,null,V(t.menus,n=>(l(),r(v,{label:n.label,value:n.value},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):t.type===s(g).text?(l(),r(fe,{key:1,modelValue:a.value[t.key],"onUpdate:modelValue":n=>a.value[t.key]=n,placeholder:"请输入"+t.label},null,8,["modelValue","onUpdate:modelValue","placeholder"])):t.type===s(g).switch?(l(),r(pe,{key:2,modelValue:a.value[t.key],"onUpdate:modelValue":n=>a.value[t.key]=n},null,8,["modelValue","onUpdate:modelValue"])):t.type===s(g).time?(l(),h("div",qe,[b(be,{placement:"bottom-start",modelValue:a.value[t.key],"onUpdate:modelValue":n=>a.value[t.key]=n,type:"date",placeholder:"选择日期",clearable:""},null,8,["modelValue","onUpdate:modelValue"]),b(w,{class:"opa-text",type:"primary",text:"",onClick:n=>ue(t.key)},{default:i(()=>[_(" 当前时间 ")]),_:2},1032,["onClick"])])):t.type===s(g).icon?(l(),h("div",Le,[b(xe,{ref_for:!0,ref_key:"iconDropRef",ref:D,"hide-on-click":!1,"popper-class":"icon-dropdown",placement:"bottom-start",trigger:"click","max-height":300},{dropdown:i(()=>[y.value==="my"?(l(),r(w,{key:0,class:"my-upload",type:"primary",onClick:he},{default:i(()=>[_(" 上传图片 ")]),_:1})):j("",!0),b(ke,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=n=>y.value=n),class:"d-column",onTabChange:ge},{default:i(()=>[b(F,{label:"系统图标",name:"system"},{default:i(()=>[b(R,{class:"icon-pane"},{default:i(()=>[(l(!0),h(S,null,V(s(Ie),n=>{var C;return l(),r(w,{class:A({active:((C=a.value[t.key])==null?void 0:C.icon)===n}),key:n,text:"",type:"info",onClick:N=>de(n,t.key)},{default:i(()=>[b(ve,{icon:n},null,8,["icon"])]),_:2},1032,["class","onClick"])}),128))]),_:2},1024)]),_:2},1024),b(F,{label:"我的",name:"my"},{default:i(()=>[Y((l(),r(R,{class:"my-images","empty-text":"暂无数据","element-loading-text":"数据加载中...","element-loading-background":"rgba(0, 0, 0, 0)"},{default:i(()=>[(l(!0),h(S,null,V(s(U).images,(n,C)=>{var N;return l(),h("div",{class:A(["table-img",{active:((N=a.value[t.key])==null?void 0:N.icon)===n}]),key:C,onClick:Ee=>re(n,t.key)},[je("img",{src:n,alt:""},null,8,He)],10,ze)}),128))]),_:2},1024)),[[K,s(U).loadingState===s(p).loading]])]),_:2},1024)]),_:2},1032,["modelValue"])]),default:i(()=>[b(w,null,{default:i(()=>[_(" 请选择 ")]),_:1})]),_:2},1536),(G=a.value[t.key])!=null&&G.icon?(l(),r(se,{key:0,src:(Q=a.value[t.key])==null?void 0:Q.icon,color:(W=a.value[t.key])==null?void 0:W.color,style:{margin:"0 20px"}},null,8,["src","color"])):j("",!0),(X=a.value[t.key])!=null&&X.icon&&!s(ne)((Z=a.value[t.key])==null?void 0:Z.icon)&&!s(oe)((ee=a.value[t.key])==null?void 0:ee.icon)?(l(),r(Ve,{key:1,class:"icon-color-picker","model-value":(ae=a.value[t.key])==null?void 0:ae.color,"show-alpha":"",predefine:z.value,onActiveChange:n=>me(n,t.key)},null,8,["model-value","predefine","onActiveChange"])):j("",!0)])):t.type===s(g).state?(l(),r(P,{key:5,modelValue:a.value[t.key],"onUpdate:modelValue":n=>a.value[t.key]=n,placeholder:"请选择"+t.label},{default:i(()=>[(l(!0),h(S,null,V(t.map,(n,C)=>(l(),r(v,{label:n.label,value:C},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):j("",!0)]}),_:2},1032,["label"])),[[Ue,t.type!==s(g).opa]])),128)),b(J,{class:"create-opa"},{default:i(()=>[b(w,{text:"",onClick:O},{default:i(()=>[_(" 取消 ")]),_:1}),b(w,{type:"primary",disabled:!ie.value,onClick:ye},{default:i(()=>[_(" 创建 ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])),[[K,H.value]])]),_:1},8,["modelValue"])):j("",!0)}}}),Ne={key:1},Ye={key:3,class:"d-flex align-center table-icon"},Ae={key:6,class:"table-opas w-full"},Qe=E({__name:"TableItem",props:{data:{type:Object,require:!0,default:{}},header:{type:Object,require:!0,default:{}},config:{type:Object,require:!0,default:{}}},setup(e){return(c,m)=>{const k=u("el-option"),f=u("el-select"),y=u("el-switch"),z=u("svg-icon"),D=u("el-button");return e.header.type===s(g).select?(l(),r(f,{key:0,modelValue:e.data[e.header.key],"onUpdate:modelValue":m[0]||(m[0]=a=>e.data[e.header.key]=a),placeholder:""},{default:i(()=>[(l(!0),h(S,null,V(e.header.menus,a=>(l(),r(k,{label:a.label,value:a.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])):e.header.type===s(g).text?(l(),h("span",Ne,B(e.data[e.header.key]),1)):e.header.type===s(g).switch?(l(),r(y,{key:2,modelValue:e.data[e.header.key],"onUpdate:modelValue":m[1]||(m[1]=a=>e.data[e.header.key]=a)},null,8,["modelValue"])):e.header.type===s(g).time?(l(),h("span",Ye,[b(z,{icon:"clock"}),_(B(s($e)(new Date(e.data[e.header.key])).format("YYYY-MM-DD HH:mm:ss")),1)])):e.header.type===s(g).icon?(l(),r(se,{key:4,src:e.data[e.header.key].icon,color:e.data[e.header.key].color},null,8,["src","color"])):e.header.type===s(g).state&&e.header.map[e.data[e.header.key]]?(l(),h("div",{key:5,class:"state-tag",style:De({color:e.header.map[e.data[e.header.key]].color,"background-color":e.header.map[e.data[e.header.key]].color+"30"}),"disable-transitions":!0},B(e.header.map[e.data[e.header.key]].label),5)):e.header.type===s(g).opa?(l(),h("div",Ae,[(l(!0),h(S,null,V(e.header.buttons,a=>(l(),r(D,{class:A({"opa-text":e.header.buttonType==="text"}),type:s(te)[a.type].type,text:e.header.buttonType==="text",round:e.header.buttonType==="round",plain:e.header.buttonType==="plain"},{default:i(()=>[_(B(s(te)[a.type].label),1)]),_:2},1032,["class","type","text","round","plain"]))),256))])):j("",!0)}}});export{Ge as _,Qe as a,I as b,x as c,Fe as f,Je as g,Ke as m,q as t};
