import{d as B,r as g,u as D,k as I,l as E,b as s,o,i as h,w as l,a as t,g as V,c as x,m as S,t as H,F as z,n as L,p as C,q as N,s as w,T as M,v as R,_ as q,x as O}from"./index-yFwA1pzl.js";import{s as r,f as F,L as P}from"./useNavStore-BXP0KCkZ.js";import{_ as U}from"./logo-ChKNGWKM.js";const W=B({name:"home-header",__name:"HomeHeader",props:{isCollapse:{type:Boolean,default:!1},breadcrumbs:{type:Array,default:[]}},emits:["update:isCollapse"],setup(e,{emit:d}){const p=e,u=d,n=g(!1),c=g(!1),m=D();I(()=>{n.value=p.isCollapse}),E(()=>n.value,()=>{u("update:isCollapse",n.value)});const f=()=>{n.value=!n.value},a=i=>{i.path&&(r.setCurNav(i),m.push({path:i.path}))};return(i,_)=>{const v=s("svg-icon"),b=s("el-button"),y=s("el-breadcrumb-item"),A=s("el-breadcrumb"),$=s("el-row"),T=s("el-switch"),j=s("el-avatar");return o(),h($,{class:"home-header",justify:"space-between",align:"middle"},{default:l(()=>[t($,{align:"middle"},{default:l(()=>[t(b,{link:"",class:"ml-1 expand-btn mr-1",onClick:f},{default:l(()=>[t(v,{icon:n.value?"collapsed":"collapse"},null,8,["icon"])]),_:1}),t(A,{separator:"/"},{default:l(()=>[t(y,{to:{path:"/"},onClick:_[0]||(_[0]=k=>a({path:"/"}))},{default:l(()=>[V(" 首页 ")]),_:1}),(o(!0),x(z,null,S(e.breadcrumbs,k=>(o(),h(y,{key:k.path,onClick:ue=>a(k)},{default:l(()=>[V(H(k.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t($,{align:"middle"},{default:l(()=>[t(b,{link:"",class:"mr-1"},{default:l(()=>[t(v,{icon:"search",size:"24"})]),_:1}),t(b,{link:"",class:"mr-1"},{default:l(()=>[t(v,{icon:"github",size:"24"})]),_:1}),t(T,{modelValue:c.value,"onUpdate:modelValue":_[1]||(_[1]=k=>c.value=k),"inline-prompt":"",class:"mr-2"},{"active-action":l(()=>[t(v,{icon:"sun"})]),"inactive-action":l(()=>[t(v,{icon:"moon"})]),_:1},8,["modelValue"]),t(j,{size:32,icon:"User"})]),_:1})]),_:1})}}}),G=B({name:"MuMenu",__name:"Menu",props:{menu:{type:Object,require:!0,default:{}},index:{type:String,require:!0,default:0},isActive:{type:Boolean,default:!1}},setup(e){const d=e,p=L(),u=D(),n=()=>{r.tabs.findIndex(m=>m.path===d.menu.path)===-1&&r.tabs.push(d.menu),r.setCurNav(d.menu),u.push({path:d.menu.path})};return(c,m)=>{const f=s("svg-icon"),a=s("el-icon"),i=s("mu-menu"),_=s("el-sub-menu"),v=s("el-menu-item");return e.menu.children&&e.menu.children.length>0?(o(),h(_,{key:0,index:e.index},{title:l(()=>[t(a,null,{default:l(()=>[t(f,{icon:e.menu.icon,class:C({"empty-icon":!e.menu.title})},null,8,["icon","class"])]),_:1}),N("span",{class:C(["menu-title",{empty:!e.menu.title}])},H(e.menu.title),3)]),default:l(()=>[(o(!0),x(z,null,S(e.menu.children,(b,y)=>(o(),h(i,{key:b.id,menu:b,index:e.index+"-"+(y+1),isActive:w(p).path===b.path},null,8,["menu","index","isActive"]))),128))]),_:1},8,["index"])):(o(),h(v,{key:1,index:e.index,class:C({"empty-menu":!e.menu.title,active:e.isActive}),onClick:n},{title:l(()=>[t(a,null,{default:l(()=>[t(f,{icon:e.menu.icon,class:C({"empty-icon":!e.menu.title})},null,8,["icon","class"])]),_:1}),N("span",{class:C(["menu-title",{empty:!e.menu.title}])},H(e.menu.title),3)]),_:1},8,["index","class"]))}}}),J={key:0,class:"d-center home-p"},K=N("img",{class:"logo",src:U,alt:"logo"},null,-1),Q={key:1,class:"d-center home-p"},X=N("img",{class:"logo",src:U,alt:"logo"},null,-1),Y=[X],Z=B({__name:"HomeNavbar",props:{isCollapse:{type:Boolean,default:!1}},emits:["update:isCollapse"],setup(e,{emit:d}){const p=e,u=g(),n=g(),c=g(["1"]);I(()=>{setTimeout(()=>{F().then(a=>{c.value=a,a.forEach(i=>{n.value.open(i)})})},500)}),E(()=>p.isCollapse,()=>{p.isCollapse?(u.value.$el.style.transition="all .25s ease",setTimeout(()=>{u.value.$el.style.maxWidth="60px"})):(u.value.$el.style.maxWidth="1000px",setTimeout(()=>{u.value.$el.style.transition="none"},250),c.value.forEach(a=>{n.value.open(a)}))});const m=a=>{c.value.findIndex(_=>_===a)===-1&&c.value.push(a)},f=a=>{const i=c.value.findIndex(_=>_===a);i!==-1&&c.value.splice(i,1)};return(a,i)=>{const _=s("el-text"),v=s("el-row"),b=s("el-menu"),y=s("el-scrollbar"),A=s("mu-dragable");return o(),h(A,{ref_key:"dragable",ref:u,class:C(["home-navbar",{"drag-collapse":e.isCollapse,loading:w(r).loadingState===w(P).loading}]),"init-width":200,"min-width":200,"drag-enabled":!e.isCollapse},{default:l(()=>[t(v,{class:"home-h",align:"middle",justify:"center"},{default:l(()=>[t(M,{name:"logo",mode:"out-in"},{default:l(()=>[e.isCollapse?(o(),x("div",Q,Y)):(o(),x("div",J,[K,e.isCollapse?R("",!0):(o(),h(_,{key:0,class:"logo-name"},{default:l(()=>[V("管理系统")]),_:1}))]))]),_:1})]),_:1}),t(y,{class:"navbar-list"},{default:l(()=>[t(b,{ref_key:"menuRef",ref:n,"default-openeds":c.value,collapse:e.isCollapse,onOpen:m,onClose:f},{default:l(()=>[(o(!0),x(z,null,S(w(r).navs,($,T)=>(o(),h(G,{key:T,index:(T+1).toString(),menu:$},null,8,["index","menu"]))),128))]),_:1},8,["default-openeds","collapse"])]),_:1})]),_:1},8,["class","drag-enabled"])}}}),ee={},te={class:"home-content"};function ne(e,d){const p=s("router-view");return o(),x("div",te,[t(p,null,{default:l(({Component:u,route:n})=>[t(M,{name:"slide"},{default:l(()=>[(o(),h(O(u),{key:n.path}))]),_:2},1024)]),_:1})])}const le=q(ee,[["render",ne]]),ae={class:"home-tags"},se={class:"tags-content"},oe=["onClick"],ce=B({__name:"HomeTags",setup(e){const d=L(),p=D(),u=(c,m)=>{c.stopPropagation();const f=r.tabs.findIndex(a=>a.path===m.path);if(f!==-1){r.tabs.splice(f,1);const a=r.tabs[f-1]||r.tabs[f];a&&p.push({path:a.path})}},n=(c,m)=>{c.preventDefault(),r.setCurNav(m),p.push({path:m.path})};return(c,m)=>{const f=s("svg-icon"),a=s("el-button");return o(),x("div",ae,[N("div",se,[(o(!0),x(z,null,S(w(r).tabs,(i,_)=>(o(),x("div",{class:C(["tag-item d-center",{active:w(d).path===i.path}]),key:i.title,onClick:v=>n(v,i)},[V(H(i.title)+" ",1),t(a,{link:"",onClick:v=>u(v,i)},{default:l(()=>[_!==0?(o(),h(f,{key:0,icon:"close",size:"14"})):R("",!0)]),_:2},1032,["onClick"])],10,oe))),128))])])}}}),ie={class:"flex-1 overflow-hidden"},pe=B({__name:"HomePage",setup(e){const d=g(!1),p=g([]);return E(()=>r.curNav,()=>{if(!r.curNav)return;window.document.title=r.curNav.title;const u=[];r.curNav.path!=="/"&&u.push(r.curNav);let n=r.curNav.parent;for(;n;)u.push(n),n=n.parent;p.value=u.reverse()}),(u,n)=>{const c=s("el-row");return o(),h(c,{class:"no-wrap w-full h-full"},{default:l(()=>[t(Z,{isCollapse:d.value,"onUpdate:isCollapse":n[0]||(n[0]=m=>d.value=m)},null,8,["isCollapse"]),N("div",ie,[t(W,{isCollapse:d.value,"onUpdate:isCollapse":n[1]||(n[1]=m=>d.value=m),breadcrumbs:p.value},null,8,["isCollapse","breadcrumbs"]),t(ce),t(le)])]),_:1})}}});export{pe as default};
